<div class="col-sm-9 col-md-10 p-3">
  <div class="container-fluid">
    <div class="row">
      <div class="col">
        <h1><i class="fas fa-cloud-upload-alt"></i>&nbsp;Triage - API Requests</h1>
        <hr>
      </div>
    </div>
  </div>
  <h4>
    <i class="fas fa-history"></i>&nbsp;History
  </h4>

  <%- include('../includes/search') %>



  <div id="history-container" class="container">
    <% blobs.forEach(blob=> { %>
    <% const obj=JSON.parse(blob.data) %>
    <div class="blob-wrapper">
      <h4>
        <strong id="title-blob">
          <%= obj.Time %>
        </strong>
      </h4>
      <% /* Logic in below anchor for sharing permalink */ %>
      <a id="ref-link-<%= blob.name %>">
        <button type="button" class="btn btn-outline-primary float-right shareButton" data-toggle="tooltip" data-placement="top" title="Copy Permalink of this request to Clipboard">
          Share
        </button>
      </a>

      <div class="aBox">

        <div id="request-lite">
          <div class="blob-guid-wrapper">GUID: <%= obj.GUID %></div>
          <div class="blob-ip-wrapper">IP: <%= obj.IP %></div>
          <div class="blob-method-wrapper">Method: <%= obj.Method %></div>
          <div class="blob-url-wrapper">URL: <%= obj.URL %></div>
          <div class="blob-status-wrapper">Status: <%= obj.Status %></div>
          <div class="blob-contentLength-wrapper">Content-Length: <%= obj['Content-Length'] %></div>
          <div class="blob-elapsedTime-wrapper">Elapsed-Time: <%= obj['Elapsed-Time'] %></div>
        </div>

      </div>
      <strong>REQUEST</strong>

      <button type="button" class="collapsible">
        Headers:&nbsp;&nbsp;&nbsp;&nbsp;
        <i class="fas fa-chevron-down"></i>
      </button>

      <div id="request-headers" class="content">
        <pre>
            <%= JSON.stringify(obj?.REQUEST?.Headers, undefined, 2) %>
        </pre>
      </div>

      <button type="button" class="collapsible">
        Body:&nbsp;&nbsp;&nbsp;&nbsp;
        <i class="fas fa-chevron-down"></i>
      </button>

      <div id="blob-request-body" class="content">
        <pre>
            <%= JSON.stringify(obj?.REQUEST?.Body, undefined, 2) %>
        </pre>
      </div>
      <strong>RESPONSE</strong>

      <button type="button" class="collapsible">
        Headers:&nbsp;&nbsp;&nbsp;&nbsp;
        <i class="fas fa-chevron-down"></i>
      </button>

      <div id="response-headers" class="content">
        <pre>
            <%= JSON.stringify(obj?.RESPONSE?.Headers, undefined, 2) %>
        </pre>
      </div>
      <button type="button" class="collapsible">
        Body:&nbsp;&nbsp;&nbsp;&nbsp;
        <i class="fas fa-chevron-down"></i>
      </button>
      <div id="blob-response-body" class="content">
        <pre>
            <%= JSON.stringify(obj?.RESPONSE?.Body, undefined, 2) %>
        </pre>
      </div>
      <hr class="callDivider">
      <br><br>
    </div>
    
    <% }) %>


  </div>

</div>